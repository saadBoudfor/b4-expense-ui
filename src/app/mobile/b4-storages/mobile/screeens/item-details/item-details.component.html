<div class="storage-details-container background-color-accent">
  <navigation [enableLeft]="true"
              [leftAction]="'/storage'"
              ngColor="white"
              [title]="'Storage'"
              [titleIcon]="'local_fire_department'"></navigation>

  <main class="mat-app-background">
    <section class="img"
             *ngIf="product_photo"
             [style]="'background-image: url(' + product_photo + ');'">
    </section>

    <section class="product-details">
      <!--      <h4> Détails produit</h4>-->

      <ng-container *ngFor="let information of itemInformation">
        <div class="information">
          <span class="key">{{information.key}}</span>
          <span class="value">{{information.value}}
            <button *ngIf="information.action === 'update_quantity'"
                    class="update-quantity"
                    mat-raised-button
                    (click)="updateQuantity()"
                    mat-button>
              <mat-icon matSuffix color="accent">edit</mat-icon>
            </button>
          </span>
        </div>
        <mat-divider></mat-divider>
      </ng-container>
    </section>


    <section class="nutritional-information">
      <h4> Information nutritionelle</h4>

      <ng-container *ngFor="let information of nutritionalInformation">
        <div class="information">
          <span class="key">{{information.key}}</span>
          <span
            class="value nutritional-value">
            <span
              class="indicator"
              [class.background-color-accent]="information.value === 'moderate'"
              [class.background-color-primary]="information.value === 'low'"
              [class.background-color-warn]="information.value === 'high'">
              </span>
            <span
              [class.color-accent]="information.value === 'C'"
              [class.color-warn]="information.value === 'D'|| information.value === 'E'">
              {{information.value}}
            </span>
          </span>
        </div>
        <mat-divider></mat-divider>
      </ng-container>

    </section>

    <section *ngIf="updateHistory" class="nutritional-information">
      <h4> Historique mise à jour</h4>

      <ng-container *ngFor="let history of updateHistory">
        <ng-container *ngIf="history && history.updateTime">
          <div *ngIf="history.updateTime" class="information">
            <span class="key">{{history.updateTime | dateFormat}}</span>
            <span class="value quantity">{{history.quantity}} {{unit}} <span class="comment">{{history.comment}}</span></span>
          </div>
          <mat-divider></mat-divider>
        </ng-container>
      </ng-container>

    </section>
  </main>
</div>

